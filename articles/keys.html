<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Key information • gguidance</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Key information">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gguidance</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/guide_composition.html">A guide to guide composition</a></li>
    <li><a class="dropdown-item" href="../articles/keys.html">Key information</a></li>
    <li><a class="dropdown-item" href="../articles/tour.html">A guided tour</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/teunbrand/gguidance/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Key information</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/teunbrand/gguidance/blob/main/vignettes/articles/keys.Rmd" class="external-link"><code>vignettes/articles/keys.Rmd</code></a></small>
      <div class="d-none name"><code>keys.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://teunbrand.github.io/gguidance/">gguidance</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ggplot2</span></span></code></pre></div>
<p>Rather than information that is key, this article will discuss
information about keys.</p>
<div class="section level2">
<h2 id="keys-in-vanilla-ggplot2">Keys in vanilla ggplot2<a class="anchor" aria-label="anchor" href="#keys-in-vanilla-ggplot2"></a>
</h2>
<p>The way guides exchange information with scales is through so called
‘keys’. Keys are simply data frames that typically hold information
about the aesthetic, what values they represent and how these should be
displayed. You may have already seen keys if you’ve used the
<code><a href="https://ggplot2.tidyverse.org/reference/get_guide_data.html" class="external-link">get_guide_data()</a></code> function before, as it can be used to
retrieved a guide’s key. In the data frame below, we can see a key for
the ‘x’ aesthetic. It tells us the relative location of tick marks in
the aesthetic’s <code>x</code> column, and the numerical values they
represent in the <code>.value</code> column. How the values should be
communicated to users is captured in the <code>.label</code> column.
Sometimes, keys have information about additional aesthetics, like the
<code>y</code> column in the key below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">standard</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">drv</span>, colour <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    shape  <span class="op">=</span> <span class="st">"Drive train"</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"Drive train"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Highway efficiency"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Engine Displacement"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/get_guide_data.html" class="external-link">get_guide_data</a></span><span class="op">(</span><span class="va">standard</span>, aesthetic <span class="op">=</span> <span class="st">"x"</span><span class="op">)</span></span>
<span><span class="co">#&gt;           x .value .label y</span></span>
<span><span class="co">#&gt; 1 0.1127946      2      2 0</span></span>
<span><span class="co">#&gt; 2 0.2811448      3      3 0</span></span>
<span><span class="co">#&gt; 3 0.4494949      4      4 0</span></span>
<span><span class="co">#&gt; 4 0.6178451      5      5 0</span></span>
<span><span class="co">#&gt; 5 0.7861953      6      6 0</span></span>
<span><span class="co">#&gt; 6 0.9545455      7      7 0</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="keys-in-gguidance">Keys in gguidance<a class="anchor" aria-label="anchor" href="#keys-in-gguidance"></a>
</h2>
<p>The key difference between keys in gguidance and keys in ggplot2, is
that gguidance exposes users to keys. At first, this can be an
inconvenience, but it allows for a greater degree of customisation.</p>
<div class="section level3">
<h3 id="why-use-keys">Why use keys?<a class="anchor" aria-label="anchor" href="#why-use-keys"></a>
</h3>
<p>Before we dig into the different types of keys, it is worth noting
exactly why keys have been exposed. Keys represent ‘rules’ about how to
annotate a scale, whereas the guide is the display of that rule.</p>
<p>For example, <code><a href="../reference/key_standard.html">key_log()</a></code> instructs to annotate every 10x
change with large ticks, and in between changes with smaller ticks. It
doesn’t really matter whether this rule is applied on an axis or a
colour bar. Having the rule independent of the display makes it more
modular.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">logkey</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_standard.html">key_log</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">msleep</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">sleep_total</span>, <span class="va">brainwt</span>, colour <span class="op">=</span> <span class="va">bodywt</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="fu"><a href="../reference/guide_axis_base.html">guide_axis_base</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">logkey</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_colour_viridis_c</a></span><span class="op">(</span></span>
<span>    trans <span class="op">=</span> <span class="st">"log10"</span>,</span>
<span>    guide <span class="op">=</span> <span class="fu"><a href="../reference/guide_colbar.html">guide_colbar</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">logkey</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="regular-keys">Regular keys<a class="anchor" aria-label="anchor" href="#regular-keys"></a>
</h3>
<p>The understand better how a typical key works, we can use
<code><a href="../reference/key_standard.html">key_manual()</a></code> to manually create a key. Usually it is
sufficient to just provide the <code>aesthetic</code> argument, as the
<code>.value</code> and <code>.label</code> columns automatically derive
from that.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/key_standard.html">key_manual</a></span><span class="op">(</span>aesthetic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   aesthetic .value .label</span></span>
<span><span class="co">#&gt; 1         2      2      2</span></span>
<span><span class="co">#&gt; 2         4      4      4</span></span>
<span><span class="co">#&gt; 3         6      6      6</span></span></code></pre></div>
<p>If you want custom labels, you can set the <code>label</code>
argument. Most guides in gguidance accept a <code>key</code> argument,
which will cause the guide to display the information in the key, rather
than the information automatically derived from the scale.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_standard.html">key_manual</a></span><span class="op">(</span>aesthetic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"two"</span>, <span class="st">"four"</span>, <span class="st">"six"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">standard</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/guide_axis_base.html">guide_axis_base</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">my_key</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>In addition, you can provide some automatic keys as keywords. Setting
<code>key = "minor"</code>, is the same as setting
<code>key = key_minor()</code>. In the same fashion many other
<code>key_*()</code> functions can be used as keyword by omitting the
<code>key_</code>-prefix.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">standard</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/guide_axis_base.html">guide_axis_base</a></span><span class="op">(</span>key <span class="op">=</span> <span class="st">"minor"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Some keys don’t directly return data frames, but return instructions
on how these keys should interact with scales. For example
<code><a href="../reference/key_standard.html">key_auto()</a></code>, the default key for many guides in gguidance,
needs to know the range in which to populate tickmarks.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_standard.html">key_auto</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">key</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (scale, aesthetic = NULL) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     aesthetic &lt;- aesthetic %||% scale$aesthetics[1]</span></span>
<span><span class="co">#&gt;     df &lt;- Guide$extract_key(scale, aesthetic)</span></span>
<span><span class="co">#&gt;     df &lt;- data_frame0(df, !!!label_args(...))</span></span>
<span><span class="co">#&gt;     class(df) &lt;- c("key_standard", "key_guide", class(df))</span></span>
<span><span class="co">#&gt;     df</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x55b42287c4b8&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: 0x55b42287f280&gt;</span></span></code></pre></div>
<p>We can preview what values they’d label by letting the key absorb a
scale with known limits.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">template</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">key</span><span class="op">(</span><span class="va">template</span>, <span class="st">"y"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   y .value .label</span></span>
<span><span class="co">#&gt; 1 0      0      1</span></span>
<span><span class="co">#&gt; 2 1      1     10</span></span>
<span><span class="co">#&gt; 3 2      2    100</span></span>
<span><span class="co">#&gt; 4 3      3   1000</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="ranged-keys">Ranged keys<a class="anchor" aria-label="anchor" href="#ranged-keys"></a>
</h3>
<p>A special type of guide you may find in gguidance are so called
‘ranged’ guides. The only difference with regular guides is that they do
not mark a single point for an aesthetic, but rather use a start- and
end-point to mark a range of the aesthetic. This can be convenient to
annotate co-occurrances between the data you are plotting and other
events. For example, we can annotate the airtimes of TV shows in
timeseries data.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ranges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_range.html">key_range_manual</a></span><span class="op">(</span></span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1985-09-14"</span>, <span class="st">"1993-09-16"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  end   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1992-05-09"</span>, <span class="st">"2004-05-13"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  name  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Golden Girls"</span>, <span class="st">"Frasier"</span><span class="op">)</span>, </span>
<span>  level <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span><span class="va">ranges</span></span>
<span><span class="co">#&gt;        start        end       .label .level</span></span>
<span><span class="co">#&gt; 1 1985-09-14 1992-05-09 Golden Girls      1</span></span>
<span><span class="co">#&gt; 2 1993-09-16 2004-05-13      Frasier      2</span></span></code></pre></div>
<p>Compared to a regular key, we don’t have an <code>aesthetic</code>
column, which is replaced by the <code>start</code> and <code>end</code>
columns. In these cases, we cannot indicate a single
<code>.value</code>, but we can still use the <code>.label</code>
column. The <code>.level</code> column indicates how far we have to
offset a range, so we’ll display “Frasier” farther away than “Golden
Girls”.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">unemploy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>x.sec <span class="op">=</span> <span class="fu"><a href="../reference/primitive_bracket.html">primitive_bracket</a></span><span class="op">(</span><span class="va">ranges</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>There is also an ‘automatic’ ranged key, which attempts to find
patterns in the key labels.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interaction.html" class="external-link">interaction</a></span><span class="op">(</span><span class="va">drv</span>, <span class="va">year</span><span class="op">)</span>, <span class="va">displ</span>, fill <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Drive train by year"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Engine displacement"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Drive train"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">plot</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>For example an obvious pattern in the x-axis labels of the plot above
is that you first have 3 entries for the 3 drive trains in 1999,
followed by 3 drive trains in 2008. By default,
<code><a href="../reference/key_range.html">key_range_auto()</a></code> tries to split the label on any
non-alphanumeric character, but you give explicit split instructions by
using the <code>sep</code> argument.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Split on literal periods</span></span>
<span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_range.html">key_range_auto</a></span><span class="op">(</span>sep <span class="op">=</span> <span class="st">"\\."</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/primitive_bracket.html">primitive_bracket</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">key</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="futher-gimmicks">Futher gimmicks<a class="anchor" aria-label="anchor" href="#futher-gimmicks"></a>
</h2>
<div class="section level3">
<h3 id="piping-keys">Piping keys<a class="anchor" aria-label="anchor" href="#piping-keys"></a>
</h3>
<p>The <code><a href="../reference/key_standard.html">key_manual()</a></code> and <code><a href="../reference/key_range.html">key_range_manual()</a></code>
functions have equivalents that are easy to pipe. They are called
<code><a href="../reference/key_standard.html">key_map()</a></code> and <code><a href="../reference/key_range.html">key_range_map()</a></code> respectively,
and they can replace doing the following:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_range.html">key_range_manual</a></span><span class="op">(</span></span>
<span>  start <span class="op">=</span> <span class="va">presidential</span><span class="op">$</span><span class="va">start</span>,</span>
<span>  end   <span class="op">=</span> <span class="va">presidential</span><span class="op">$</span><span class="va">end</span>,</span>
<span>  name  <span class="op">=</span> <span class="va">presidential</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>By the following, more pipe-friendly version:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="va">presidential</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/key_range.html">key_range_map</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="va">start</span>,</span>
<span>    end   <span class="op">=</span> <span class="va">end</span>,</span>
<span>    name  <span class="op">=</span> <span class="va">name</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Both of these keys would display as something like this:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">unemploy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>x.sec <span class="op">=</span> <span class="fu"><a href="../reference/primitive_bracket.html">primitive_bracket</a></span><span class="op">(</span><span class="va">key</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="formatting-keys">Formatting keys<a class="anchor" aria-label="anchor" href="#formatting-keys"></a>
</h3>
<p>In addition to having a lot of control over what the keys display,
you also have control over common text formatting operations in keys.
Most key options have an <code>...</code> argument that allows many
arguments to <code><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text()</a></code> to be passed on to the
labels.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/guide_axis_base.html">guide_axis_base</a></span><span class="op">(</span>key <span class="op">=</span> <span class="fu"><a href="../reference/key_standard.html">key_auto</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"red"</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<p>In some cases where you know the label in advance, which is almost
every time one uses <code><a href="../reference/key_standard.html">key_manual()</a></code>, <code><a href="../reference/key_standard.html">key_map()</a></code> or
their ranged equivalents, you can even vectorise these formatting
options.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">guide</span> <span class="op">&lt;-</span> <span class="va">presidential</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/key_range.html">key_range_map</a></span><span class="op">(</span></span>
<span>    start <span class="op">=</span> <span class="va">start</span>,</span>
<span>    end   <span class="op">=</span> <span class="va">end</span>,</span>
<span>    name  <span class="op">=</span> <span class="va">name</span>,</span>
<span>    colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">party</span> <span class="op">==</span> <span class="st">"Republican"</span>, <span class="st">"tomato"</span>, <span class="st">"dodgerblue"</span><span class="op">)</span>,</span>
<span>    face  <span class="op">=</span> <span class="st">"bold"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/primitive_bracket.html">primitive_bracket</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">unemploy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>x.sec <span class="op">=</span> <span class="va">guide</span><span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="forbidden-keys">Forbidden keys<a class="anchor" aria-label="anchor" href="#forbidden-keys"></a>
</h3>
<p>There are, at the time of writing, two keys that you probably
shouldn’t use in your code. These are <code><a href="../reference/key_specialty.html">key_sequence()</a></code> and
<code><a href="../reference/key_specialty.html">key_bins()</a></code>. The hope is that mentioning their use here will
prevent experimenting and subsequent frustration with these keys. You
can see that <code><a href="../reference/key_specialty.html">key_sequence()</a></code> does not produce an informative
axis.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_sequence_key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_specialty.html">key_sequence</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="va">standard</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/guide_axis_base.html">guide_axis_base</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">my_sequence_key</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<p>The reason for this is that this key was designed for colour
gradients</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span>, colour <span class="op">=</span> <span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_colour_viridis_c</a></span><span class="op">(</span></span>
<span>    guide <span class="op">=</span> <span class="fu"><a href="../reference/gizmo_barcap.html">gizmo_barcap</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">my_sequence_key</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>Likewise, <code><a href="../reference/key_specialty.html">key_bins()</a></code> was not designed for regular
guides, but is specific to colour steps.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_bins_key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_specialty.html">key_bins</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span>, colour <span class="op">=</span> <span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_colour_viridis_c</a></span><span class="op">(</span></span>
<span>    guide <span class="op">=</span> <span class="fu"><a href="../reference/gizmo_stepcap.html">gizmo_stepcap</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">my_bins_key</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="keys_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Teun van den Brand.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
